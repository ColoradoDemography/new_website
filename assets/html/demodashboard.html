<!DOCTYPE html>
<!-- SDO Demographic Dashboard -->
<html lang="en">

<head>
<title>SDO Demographic Dashboard</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<!-- FONT AWESOME CSS  Source for buttons the list of icons is here: https://fontawesome.com/icons?d=gallery&p=2 -->
<!-- angle-down, angle-double-down, angle-circle-down, angle-right, angle-circle-right, the new button is in common.css --> 
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" 
     integrity="sha512-Fo3rlrZj/k7ujTnHg4CGR2D7kSs0v4LLanw2qksYuRlEzO+tcaEPQogQ0KaoGN26/zrn20ImR1DfuLWnOo7aBA==" 
	 crossorigin="anonymous" referrerpolicy="no-referrer" />
<!-- SDO CSS -->
<link type="text/css" rel="stylesheet" href="../css/common.css" async=""> 
<!-- adding d3.js  for data manipulation-->
 <script src="https://d3js.org/d3.v7.min.js"></script>
<!-- Adding Plotly.js for  charting -->

<!-- Adding jquery and datatables for table production -->
<script
  src="https://code.jquery.com/jquery-3.6.0.min.js"
  integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4="
  crossorigin="anonymous">
</script>
 <script src="https://cdn.plot.ly/plotly-2.20.0.min.js" charset="utf-8"></script>
<!-- SDO suport functions, genSYA, insertHTML, -->
<script src="../js/funct.js"></script>
<!-- GoogleAnalytics Script -->
<script defer src="https://demography.dola.colorado.gov/assets/js/googleAnalytics.js"></script>
</head>
<body>
<div>
<a href="https://cdola.colorado.gov/"><img class="logoSDO" src="../img/SDO-1600x400.jpg" alt="Department of Local Affairs Homepage"></a>
</div>
<div>
<div w3-include-html="./navheader.html"></div>
<!-- First Grid, linked images -->
<div class="grid-container2">
  <div class="grid-item panel2_1_1">
		<div w3-include-html="./sdotitle.html"></div>  
  </div>
   <div class="grid-item app-panel_2_1" id="leftHand">
	<div w3-include-html="./left_hand_index.html"></div>
  </div> <!-- Grid  panel2_2_1 -->
  <div class="grid-item app-panel_2_2">
  <b>Demographic Dashboard</b>
   <br><br>INSTRUCTIONS:
   <p>
   The following page shows graphs and charts for Colorado, multi-county regions, and counties. 
   Select the geography type and geography from the list below. 
   You can hover over specific data points on each graph to view the data for that specific point.
   </p>
   Click on the download icon on the left of each chart to download the chart, the underlying data, and links to the data source.
   <br><br>
   <b><i>This data visualization can only be viewed on a tablet or desktop.</i></b>
   <br><br>
   <table style="border-collapse: collapse; border : none;">
   <tr>
 	<td style="border : none; width: 25%;">
	<p class="entry_text">Select Geography Type:</p>
	</td>
	<td style="border : none; width: 37%;">
	 <p class="entry_text">Select Geography:</p> 
	 </td>
	 <td style="border : none; width: 37%;">
    <p class="entry_text" id="county-lbl">Select County in Region:</p>
	</td>
	</tr>
	<tr>
	<td style="border : none; width: 25%;">
	<select class="geo-dropdown" id="geo-dropdown">
		<option value = "region">Region</option>
		<option value="county" selected>County</option>
	 </select>
	</td>
	<td style="border : none; width: 37%;"> 
	 <select class="location-dropdown" id="location-dropdown"></select>
	 </td>
	<td style="border : none; width: 37%;">
    <select class="county-dropdown" id="county-dropdown"></select>
    </td>
	</tr>
	</table>
  <div class="grid-item app-panel_3_2">
      <div class="dropdown AClass">
		  <button class="dropbtn"  id="estimate"><i class="fas fas fa-download fa-2x" style='color: black;'></i></button>
		  <div class="dropdown-content">
		  	<ul class='dd-list'>
			<li><a href='#' id='est_csv'>Download Data (CSV)</a></li>
			<li><a href='#' id='est_png'>Download Image (PNG)</a></li>
			<li><a href='https://coloradodemography.github.io/population/data/county-data-lookup/' id='est_src'>County Total Population Lookup</a></li>
			</ul>
		  </div>
	  </div>
	 <div id="est_output"></div>
  </div>
  <div class="grid-item app-panel_4_2">
	<div class="dropdown AClass">
		<button class="dropbtn" id="forecast"><i class="fas fas fa-download fa-2x" style='color: black;'></i></button>
	<div class="dropdown-content">
	    <ul class='dd-list'>
		<li><a href="#" id='forec_csv'>Download Data (CSV)</a></li>
		<li><a href='#' id='forec_png'>Download Image (PNG)</a></li>
		<li><a href='https://coloradodemography.github.io/population/data/sya-county/' id='fore_src'>County Single Year of Age Lookup</a></li>
		</ul>
	 </div>
	</div>
    <div id="forec_output"></div>
  </div>
  <div class="grid-item app-panel_5_2">
  	<div class="dropdown AClass">
		<button class="dropbtn" id="coc"><i class="fas fas fa-download fa-2x" style='color: black;'></i></button>
	<div class="dropdown-content">
		<ul class='dd-list'>
		<li><a href="#" id='coc_csv'>Download Data (CSV)</a></li>
		<li><a href='#' id='coc_png'>Download Image (PNG)</a></li>
        <li><a href='https://coloradodemography.github.io/births-deaths-migration/data/components-change/#components-of-change' id='coc_src'>County Births, Deaths, and Migration Lookup</a></li>
		</ul>
	 </div>
	</div>
    <div id="coc_output"></div>
  </div>
  <div class="grid-item app-panel_6_2">
    <div class="dropdown AClass">
		<button class="dropbtn" id="migr"><i class="fas fas fa-download fa-2x" style='color: black;'></i></button>
	<div class="dropdown-content">
		<ul class='dd-list'>
		<li><a href="#" id='mig_csv'>Download Data (CSV)</a></li>
		<li><a href='#' id='mig_png'>Download Image (PNG)</a></li>
	    </ul>
	 </div>
	</div>
	<div id="mig_output"></div>
  </div>
  <div class="grid-item app-panel_7_2">
    <div class="dropdown AClass">
		<button class="dropbtn" id="age"><i class="fas fas fa-download fa-2x" style='color: black;'></i></button> 
	<div class="dropdown-content">
	    <ul class='dd-list'>
		<li><a href="#" id='age_csv'>Download Data (CSV)</a></li>
		<li><a href='#' id='age_png'>Download Image (PNG)</a></li>
		<li><a href='https://coloradodemography.github.io/population/data/sya-county/' id='age_src'>County Single Year of Age Lookup</a></li>
		</ul>
	 </div>
	</div>
    <div id="ageest_output"></div>
  </div>  
  <div class="grid-item app-panel_8_2">
      <div class="dropdown AClass">
		<button class="dropbtn" id="popchng"><i class="fas fas fa-download fa-2x" style='color: black;'></i></button>
	  <div class="dropdown-content">
	  	<ul class='dd-list'>
		<li><a href="#" id='popchng_csv'>Download Data (CSV)</a></li>
		<li><a href='#' id='popchng_png'>Download Image (PNG)</a></li>
        <li><a href='https://coloradodemography.github.io/population/data/sya-county/' id='popchng_src'>County Single Year of Age Lookup</a></li>
		</ul>
	 </div>
	</div>
	<div class="dropdown AClass">
	<p class="entry_text">Select Unit:</p>
	 <select class="unit-dropdown" id="unit-dropdown">
		<option value='percent' selected>Percentage</option>
		<option value='count'>Counts</option>
	 </select>
    <div id="popchng_output"></div> 
 </div>
</div>  <!-- End of Grid -->


<script>
//Setting HTML include and Accordion
includeHTML(); 
//Hide Buttons
hideButtons();

/* Populate County Dropdown */
var ctyDrop = document.getElementById("county-dropdown");
var ctyDroplbl = document.getElementById("county-lbl");
ctyDroplbl.style.display = 'none';
ctyDrop.style.display = 'none';
popDropdown('county','location-dropdown','')

//generating maximum year value for estimates
var urlstr = "https://gis.dola.colorado.gov/lookups/componentYRS";

d3.json(urlstr).then(function(yeardata){

    var maxest = yeardata.filter(function(d){return d.datatype == 'Estimate'});
	var yrsList = maxest.map(function(d){return d.year;});
    var yrvalue = d3.max(yrsList); 

//Generate Initial Tables
showButtons();

var selectedunit = d3.select("#unit-dropdown").property('value');

genDEMO("county", "000", selectedunit,"Colorado", yrvalue);
d3.select("#geo-dropdown").on("change", function(d,i) {
      var selectedGeo = d3.select("#geo-dropdown").property('value');
	  popDropdown(selectedGeo,'location-dropdown','');
	  var selectedfips = d3.select("#location-dropdown").property('value');
	  var selectedregion = d3.select("#location-dropdown option:checked").text();
	  var selectedunit = d3.select("#unit-dropdown").property('value');
	  genDEMO(selectedGeo,selectedfips,selectedunit, selectedregion,yrvalue);
//Display drilldown boxes
	  if(selectedGeo == 'region') {
	    if (ctyDrop.style.display === "none") {
		    ctyDroplbl.style.display = "block";
			ctyDrop.style.display = "block";
			popCtyDrop(selectedfips,'county-dropdown');
		} else {
		    ctyDroplbl.style.display = "none";
			ctyDrop.style.display = "none";
		}
	  } else {
	  	 ctyDroplbl.style.display = "none";
	     ctyDrop.style.display = "none";
		}
	  });
	  
d3.select("#location-dropdown").on("change", function(d,i) {
	    var selectedGeo = d3.select("#geo-dropdown").property('value');
        var selectedfips = d3.select("#location-dropdown").property('value');
		var selectedcounty = d3.select('#location-dropdown option:checked').text();
		var selectedunit = d3.select("#unit-dropdown").property('value');
        genDEMO(selectedGeo,selectedfips,selectedunit,selectedcounty,yrvalue);
		if(selectedGeo == 'region') {
		   popCtyDrop(selectedfips,'county-dropdown');
		}
    });
	
d3.select("#unit-dropdown").on("change", function(d,i) {
	    var selectedGeo = d3.select("#geo-dropdown").property('value');
        var selectedfips = d3.select("#location-dropdown").property('value');
		var selectedcounty = d3.select('#location-dropdown option:checked').text();
		var selectedunit = d3.select("#unit-dropdown").property('value');
        genDEMO(selectedGeo,selectedfips,selectedunit,selectedcounty,yrvalue);
		if(selectedGeo == 'region') {
		   popCtyDrop(selectedfips,'county-dropdown');
		}
    });
//Drill down for region...
d3.select("#county-dropdown").on("change", function(d,i) {
        var selectedfips = d3.select("#county-dropdown").property('value');
		var selectedcounty = d3.select('#county-dropdown option:checked').text();
		var selectedunit = d3.select("#unit-dropdown").property('value');
		if(selectedcounty.includes("County")){
              genDEMO("county",selectedfips,selectedunit,selectedcounty,yrvalue); 
			 } else {
			  genDEMO("region",selectedfips,selectedunit,selectedcounty,yrvalue); 
			  }
		});
}); //end of maximum year value

</script>

</body>
</html> 