<!-- County Race Ethnicity LookupPage A Bickford 6/2021 -->

<!DOCTYPE html>
<html lang="en">
<head>
<title>Race and Ethnicity by Age Estimates - County</title>
<meta name="viewport" content="width=device-width, initial-scale=1" http-equiv="content-type" content="text/html; charset=utf-8">
<!-- FONT AWESOME CSS  Source for buttons the list of icons is here: https://fontawesome.com/icons?d=gallery&p=2 -->
<!-- angle-down, angle-double-down, angle-circle-down, angle-right, angle-circle-right, the new button is in common.css --> 
<
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css" crossorigin="anonymous">

<!-- SDO CSS -->
<link type="text/css" rel="stylesheet" href="../css/common.css" async=""> 
<!-- adding d3.js  for data manipulation-->
 <script src="https://d3js.org/d3.v6.min.js"></script>
<script type="text/javascript" src="../js/saveSvgAsPng.js"></script>
<!-- Adding Plotly.js for  charting -->
<script src="https://cdn.plot.ly/plotly-2.2.0.min.js" charset="utf-8"></script>
<!-- Adding jquery and datatables for table production -->
<script
  src="https://code.jquery.com/jquery-3.6.0.min.js"
  integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4="
  crossorigin="anonymous">
</script>
 
<!-- Datatables -->
<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/v/dt/jq-3.6.0/jszip-2.5.0/dt-1.12.1/b-2.2.3/b-html5-2.2.3/sc-2.0.6/sp-2.0.1/sl-1.4.0/datatables.min.css"/>
 
<script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.5/pdfmake.min.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.66/vfs_fonts.js"></script>
<script type="text/javascript" src="https://cdn.datatables.net/v/dt/jq-3.6.0/jszip-2.5.0/dt-1.12.1/b-2.2.3/b-html5-2.2.3/sc-2.0.6/sp-2.0.1/sl-1.4.0/datatables.min.js"></script> 


	
<!-- SDO functions -->
<script type="text/javascript" src="../js/funct.js"></script>
<script type="text/javascript" src="../js/profile.js"></script>
<script type="text/javascript" src="../js/lookup.js"></script>
<!-- GoogleAnalytics Script -->
<script defer src="../js/googleAnalytics.js"></script>


</head>
<body>
<div>
<a href="https://cdola.colorado.gov/"><img class="logoSDO" src="../img/SDO-1600x400.jpg" alt="Department of Local Affairs Homepage"></a>
</div>
<div w3-include-html="../html/navheader.html"></div>

<!-- First Grid, linked images -->
<div class="grid-container2">
  <div class="grid-item panel2_1_1">
	<div w3-include-html="../html/sdotitle.html"></div>
  </div>
   <div class="grid-item app-panel_2_1" id="leftHand">
	<div w3-include-html="../html/left_hand_index.html"></div>
  </div> <!-- Grid  panel2_2_1 -->
  <div class="grid-item app-panel_2_2">
  <b>Race and Ethnicity by Age Estimates - County</b>
  <p>
  <a href="../lookups/region_sya_race_lookup.html" target='_blank'>Need Regional and State Data?</a>
  </p>
   <br>INSTRUCTIONS:
   <p class="lookup_p">
   This application creates custom tables for SDO county-level estimates by race, ethnicity, age and sex.
   </p>
   <p class="lookup_p">
    Estimated data is based on 2020 Census population estimates.  These estimates provide data broken down by: 
	</p>
   <ol type="a" class="lookup_p">
   <li>6 race categories: a) American Indian/Alaska Native Alone, b) Asian Alone, c) Black/African American Alone, d) Native Hawaiian/Pacific Islander Alone, e) White Alone, and  g) Two or More Races</li>
   <li>2 ethnic categories: a) Hispanic/Latino, b) Non-Hispanic</li>
   <li>Single year of age (0 to 85+ years)</li>
   <li>Sex (Male, Female or Combined)</li>
   </ol>
	</p>
   <p class="lookup_p"> 
   These estimates should not be compared to the 2020 Census race counts as the design of the questions and the processing of the 
   2020 Census responses differed from the questions and processing of the 2010 Census responses and should be considered a break in the series.
  </p>
  <p class="lookup_p">
   A spreadsheet with detailed information by race, ethnicity, age and sex for 2010-2020 is available on the 
   <a href='https://demography.dola.colorado.gov/assets/html/population.html' target='_blank'>SDO Population Spreadsheets</a> page.
   <br><br>
   <table style="border-collapse:collapse; border:none;">
   <tr>
	<td class="lookup_cell">
		<p class="entry_text" id="county-lbl">Select one or more Counties:</p> 
	</td>
	<td class="lookup_cell">
		<p class="entry_text" id="year-lbl">Select Year:</p>
	</td>
	<td class="lookup_cell">
		<p class="entry_text" id="race-lbl">Select one or more race caregories:</p>
	</td>
	<td class="lookup_cell">
		<p class="entry_text" id="ethnicity-lbl">Select one or more ethnicity categories:</p>
	</td>
	</tr>
	<tr>
	<td class="lookup_cell"> 
	 <select class="county-dropdown" id="county-dropdown" size="6" multiple></select>
	 </td>
	<td class="lookup_cell">
    <select class="year-dropdown" id="year-dropdown" style='width:100px;' size="6" multiple></select>
    </td>
	<td class="lookup_cell">
     <select class="race-dropdown" id="race-dropdown" size="6" multiple>
		<option value="1">White alone</option>
			<option value="2">Black or African American alone</option>
			<option value="3">American Indian and Alaska Native alone</option>
			<option value="4">Asian alone</option>
			<option value="5">Native Hawaiian or Other Pacific Islander alone</option>
			<option value="6">Two or More Races</option>
	 </select>
    </td>
	<td class="lookup_cell">
    <select class="ethnicity-dropdown" id="ethnicity-dropdown" size="2" multiple>
		<option value="1">Hispanic</option>
		<option value ="2">Non-Hispanic</option>
	</select>
    </td>
	</tr>
	</table>
	<hr>
	<table style="border-collapse: collapse; border: none;">
	<tr>
	<td class="lookup_cell">
	   <p class="entry_text" id='age-lbl'>Select one or more ages:</p>
	</td>
	<td class="lookup_cell">
	   <p class="entry_text" id='sex-lbl'>Display results by sex:</p>
	</td>
	<td class="lookup_cell">
	   <p class="entry_text" id='group-lbl'>Select 0 or more variables to summarize by (leave blank for a detailed summary):</p
	</td>
	<td class="lookup_cell">
	</td>
	<p></p>
	<td class="lookup_cell"></td>
	</tr>
	<tr>
		<td class="lookup_cell">
    <select class="age-dropdown" id="age-dropdown" style='width:100px;' size="4" multiple></select>
    </td>
	<td class="lookup_cell">
    <select class="sex-dropdown" id="sex-dropdown" size="4">
		<option value="S">Sum Male and Female</option>
		<option value="B">List Male and Female Separately</option>
		<option value="M">Male Only</option>
		<option value="F">Female Only</option>
	</select>
    </td>
	<td class="lookup_cell">
   <select class="group-dropdown" id="group-dropdown" size="4">
	    <option value='0'>No Grouping</option>
        <option value='1'>County</option>
        <option value='2'>Year</option>
        <option value='3'>Age</option>
        <option value='4'>Race</option>
        <option value='5'>Ethnicity</option>
		<option value='6'>Race, Ethnicity</option>
        <option value='7'>County, Year, Race</option>
        <option value='8'>County, Year, Ethnicity</option>
        <option value='9'>County, Year, Race, Ethnicity</option>
        <option value='10'>County, Age, Race</option>
        <option value='11'>County, Age, Ethnicity</option>
        <option value='12'>County, Age, Race, Ethnicity</option>
        <option value='13'>County, Year, Age, Race</option>
        <option value='14'>County, Year, Age, Ethnicity</option>
		<option value='0'>County, Year, Age, Rece, Ethnicity</option>
	</select>
    </td>
	<td class="lookup_cell">
		<button class='databutton' id='gentable'>Generate Table</button><br><br>
		<button class='databutton' id='cleartable'>Reset Selections</button><br>
	</td>
	</tr>
	</table>
	<hr>
   </div>
  <div class="grid-item app-panel_3_2">
	 <div id="tbl_output"></div>
  </div> 
  </div>  <!-- End of Grid Container -->
 <script> 

 includeHTML();

 popDropdown('county','county-dropdown','lookup');
 popRaceYrdd("year-dropdown",2020,2021);  //Change this range to match data
 popAgeYrdd("age-dropdown",0,85);  //Change this range to match data

//Button Event
 document.getElementById('gentable').addEventListener("click", chkInputs)
 document.getElementById('cleartable').addEventListener("click", clearInputs)
 
 function chkInputs(){

 var complete = true;
 var outputmsg = "";
 document.getElementById('tbl_output').innerHTML = "";
	    var fipsdd = document.getElementById('county-dropdown');
		var selectedfips = getSelectValues(fipsdd);

		if(selectedfips.length == 0){
		    outputmsg = outputmsg +  "  >Please select one or more counties.";
			complete = false;
		}
		
		var yrdd = document.getElementById('year-dropdown');
		var selectedyr = getSelectValues(yrdd);

		if(selectedyr.length == 0){
		    outputmsg = outputmsg +  "  >Please select one or more years.";
			complete = false;
		}

		var racedd = document.getElementById('race-dropdown');
		var selectedrace = getSelectValues(racedd)
		
		var ethdd = document.getElementById('ethnicity-dropdown');
		var selectedeth = getSelectValues(ethdd);
		
		
		if(selectedeth.length == 0 && selectedrace.length == 0){
		    outputmsg = outputmsg + "  >Please select one or more race and ethnicity groups.";
			complete = false;
		}
		if(selectedeth.length != 0 && selectedrace.length == 0){
		   var selectedrace = ['1','2','3','4']; //CHANGE WITH NEW DATA
		}
		if(selectedeth.length == 0 && selectedrace.length != 0){
		   selectedeth = ['1','2']; //CHANGE WITH NEW DATA
		}
		
		var agedd = document.getElementById('age-dropdown');
		var selectedage = getSelectValues(agedd);
		if(selectedage.length == 0){
		    outputmsg = outputmsg + "  >Please select one or more age groups.";
			complete = false;
		}

		var sexdd = document.getElementById('sex-dropdown');
		var selectedsex = sexdd.value;
		if(selectedsex == ""){
		   selectedsex = "S"
		}
		
		var groupdd = document.getElementById('group-dropdown');
		var selectedgroup = groupdd.value;
		if(selectedgroup == ""){
		   selectedgroup = "opt0";
		} else {
		   selectedgroup = "opt" + selectedgroup;
		}

		if(complete){
		     genRaceTabCty(selectedfips,selectedyr, selectedrace,selectedeth,selectedage,selectedsex,selectedgroup);
			 } else {
			 window.alert(outputmsg);
			 }
	 };  //chkInputs
	 
function clearInputs() {
   document.getElementById('tbl_output').innerHTML = "";
   var elements = document.getElementsByTagName('select');
	for (var i = 0; i < elements.length; i++) {
		elements[i].selectedIndex = -1;
	}
}; //clearInputs


 
 </script>
</body>
</html> 