<!DOCTYPE html>
<!-- the legacy website https://coloradodemography.github.io/ -->
<html lang="en">
<head>
<title>Colorado State Demography Office Home Page</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<!-- FONT AWESOME CSS  Source for buttons the list of icons is here: https://fontawesome.com/icons?d=gallery&p=2 -->
<!-- angle-down, angle-double-down, angle-circle-down, angle-right, angle-circle-right, the new button is in common.css --> 
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css" crossorigin="anonymous">
<!-- SDO CSS -->
<link type="text/css" rel="stylesheet" href="./assets/css/common.css" async=""> 


<!-- adding d3.js  for data manipulation-->
 <script src="https://d3js.org/d3.v7.min.js"></script>
<!-- SDO suport functions, genSYA, insertHTML, -->
<script src="https://demography.dola.colorado.gov/assets/js/funct.js"></script>
<!-- GoogleAnalytics Script -->
<script defer src="https://demography.dola.colorado.gov/assets/js/googleAnalytics.js"></script>
</head>

<body>
<a href="https://cdola.colorado.gov/"><img class="logoSDO" src="./assets/img/SDO-1600x400.jpg" alt="Department of Local Affairs Homepage"></a>
</div>
<div w3-include-html="./assets/html/navheader.html"></div
<!-- First Grid, linked images -->
<div class="grid-container">
  <div class="grid-item panel_1_1">
		<div w3-include-html="./assets/html/sdotitle.html"></div>  
  </div>
  <div class="grid-item panel_2_1" id="leftHand">
    <details><summary>
	    <a href="https://arcg.is/1uWC0q0" title="Visualization of recent population trends in Colorado"><b>Colorado Population Trends: Story and Visualization</b></a>
	 </summary></details>
	 <br>
	<div w3-include-html="./assets/html/left_hand_index.html"></div>
  </div> <!-- Grid  panel_2_1 -->

  <div class="grid-item panel_2_2">
	 <label for="county-dropdown">Select County:</label>
	 <select class="county-dropdown" id="county-dropdown"></select>
 </div>
 <div class="grid-item panel_3_2">
     <div id="PopTab"></div>
	 <div id="COCTab"></div>
	  <div id="RaceTab"></div>
   </div>
   <div class="grid-item panel_3_3">
	 <div id="HousTab"></div>
	 <div id="TenureTab"></div>
   </div>
   <div class="grid-item panel_3_4">
	 <div id="ACSTab"></div>
   </div>

<div class="grid-item panel_4_2">
			<div w3-include-html="./assets/html/bodycontent1.html"></div>
	 </div>
	<div class="grid-item panel_4_3">
			<div w3-include-html="./assets/html/bodycontent2.html"></div>
    </div>
	<div class="grid-item panel_4_4">
			<div w3-include-html="./assets/html/bodycontent3.html"></div>
	</div>
</div>  <!-- End Grid -->

<script>
//Setting HTML include and Accordion
includeHTML(); 

/* Populate County Dropdown */
popDropdown('county','county-dropdown')

//generating maximum year value for estimates

var urlstr = "https://gis.dola.colorado.gov/lookups/componentYRS";
d3.json(urlstr).then(function(yeardata){
    var maxest = yeardata.filter(function(d){return d.datatype == 'Estimate'});
	var yrsList = maxest.map(function(d){return d.year;});
    var yrvalue = d3.max(yrsList) 
	var acsyr = 2021;  ///CHANGE THIS WHEN 2020 ACS is available
	
//Generate Initial Tables

genSYA("000",yrvalue);
genCOC("000",yrvalue);
debugger;
genRaceEth("000",yrvalue);
genACS("000",acsyr);
genTenure("000",acsyr);
genHousing("000",yrvalue);


d3.select("#county-dropdown").on("change", function(d,i) {

        var selectedfips = d3.select("#county-dropdown").property('value');
		var selectedcounty = d3.select('#county-dropdown option:checked').text();

        genSYA(selectedfips,yrvalue);
		genCOC(selectedfips,yrvalue);
		genRaceEth(selectedfips,yrvalue)
		genACS(selectedfips,acsyr);
		genTenure(selectedfips,acsyr);
		genHousing(selectedfips,yrvalue);
    });
}); //end of maximum year value

 </script>

</body>
</html> 